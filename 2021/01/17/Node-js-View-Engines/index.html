<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>[Node.js] View Engines | Joe's Blog</title><meta name="keywords" content="Node.js"><meta name="author" content="JoeB"><meta name="copyright" content="JoeB"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Node.js(七) View EnginesView EnginesNode.js 從前面學習到現在，在伺服器響應瀏覽器所用到 HTML 頁面都是靜態的 HTML，內容都是事先就定義好的，現在想要動態的注入數據，例如部落格文章或是個人資料頁面上的用戶資料，而如何很好地在網頁模板上輸出這些數據，我們可以使用稱為 View Engines 視圖引擎或是模板引擎，使用 View Engines 編寫的">
<meta property="og:type" content="article">
<meta property="og:title" content="[Node.js] View Engines">
<meta property="og:url" content="http://example.com/2021/01/17/Node-js-View-Engines/index.html">
<meta property="og:site_name" content="Joe&#39;s Blog">
<meta property="og:description" content="Node.js(七) View EnginesView EnginesNode.js 從前面學習到現在，在伺服器響應瀏覽器所用到 HTML 頁面都是靜態的 HTML，內容都是事先就定義好的，現在想要動態的注入數據，例如部落格文章或是個人資料頁面上的用戶資料，而如何很好地在網頁模板上輸出這些數據，我們可以使用稱為 View Engines 視圖引擎或是模板引擎，使用 View Engines 編寫的">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/4OIbWlf.png">
<meta property="article:published_time" content="2021-01-17T07:01:45.000Z">
<meta property="article:modified_time" content="2021-03-07T06:26:12.303Z">
<meta property="article:author" content="JoeB">
<meta property="article:tag" content="Node.js">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/4OIbWlf.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/01/17/Node-js-View-Engines/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-07 14:26:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分類</div><div class="length-num">1</div></a></div></div></div><hr/></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.imgur.com/4OIbWlf.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Joe's Blog</a></span><span id="menus"><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">[Node.js] View Engines</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2021-01-17T07:01:45.000Z" title="發表於 2021-01-17 15:01:45">2021-01-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2021-03-07T06:26:12.303Z" title="更新於 2021-03-07 14:26:12">2021-03-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%B6%B2%E9%A0%81-%E7%B6%B2%E8%B7%AF%E7%9B%B8%E9%97%9C/">網頁/網路相關</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Node-js-七-View-Engines"><a href="#Node-js-七-View-Engines" class="headerlink" title="Node.js(七) View Engines"></a>Node.js(七) View Engines</h1><h2 id="View-Engines"><a href="#View-Engines" class="headerlink" title="View Engines"></a>View Engines</h2><p>Node.js 從前面學習到現在，在伺服器響應瀏覽器所用到 HTML 頁面都是靜態的 HTML，內容都是事先就定義好的，現在想要動態的注入數據，例如部落格文章或是個人資料頁面上的用戶資料，而如何很好地在網頁模板上輸出這些數據，我們可以使用稱為 View Engines 視圖引擎或是模板引擎，使用 View Engines 編寫的模板與 HTML 語法相似，且能夠做到將數據動態的注入到網頁中。而 View Engines 也有很多種，例如 Express Handlebars、pug、EJS，而接下來我們將要使用 EJS 繼續後面的學習。<br><br /></p>
<h2 id="EJS"><a href="#EJS" class="headerlink" title="EJS"></a>EJS</h2><p>首先安裝 EJS，只要開啟專案在終端輸入 <code>npm install ejs</code>，這裡的專案使用上一筆記的 app.js<br><img src="https://i.imgur.com/030lvXM.png"></p>
<p>安裝 ejs<br><img src="https://i.imgur.com/YEuOX7Y.png"></p>
<p>開啟 package.json 確認已安裝 ejs<br><img src="https://i.imgur.com/BVFpIAl.png"><br><br /></p>
<p>接下來要使用 express 做模板引擎的開發，如果你開啟 EJS 的官網可以看到它是直接引入 ejs 模組使用，不一定要結合 express 使用。</p>
<p>開啟 app.js 註冊 view engine，使用 <code>app.set()</code> 設定一些程序設置。<br>其中一個設置是 <code>&#39;view engine&#39;</code>，告訴 express 使用什麼樣的模板引擎，這裡使用 <code>&#39;ejs&#39;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;ejs&#x27;</span>); <span class="comment">// register view engine</span></span><br><span class="line"><span class="comment">// app.set(&#x27;views&#x27;, &#x27;views&#x27;); // specify the views directory</span></span><br></pre></td></tr></table></figure>
<p>可以看到上面的 code 我們註解了最後一行，這是因為還有一個設置是 <code>&#39;views&#39;</code> 用來定義存放視圖、模板的目錄，但這項設置的預設值就是 <code>&#39;views&#39;</code> 所以可以不用設置，除非你要將視圖存放在別的目錄。<br><br /></p>
<p>做完以上設置，接著開始製作模板，將 views 裡的三個 html 檔刪除，因為這裡不再需要純 HTML，取而代之的視圖副檔名為 ejs，所以再創建三個主檔名與之前一樣，但副檔名為 ejs 的檔案<br><img src="https://i.imgur.com/mk874N9.png"><br><br /></p>
<p>然後開啟 index.ejs 開始編碼，目前編寫的內容依舊為純 HTML，包含了導覽功能以及顯示部落格內容的地方，其中一個連結為 <code>/blogs/create</code> 用於之後創建一個新的部落格內容功能的地方</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;blogs content&quot;&gt;</span><br><span class="line">        &lt;h2&gt;All Blogs&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>試著在瀏覽器上顯示該模板，開啟 app.js，這裡要用到 <code>res.render()</code> 方法渲染視圖取代之前的 <code>res.sendFile()</code>。<br>我們只需如下編碼，express 便會自動在設置視圖目錄中找到檔案，並使用 ejs 模板引擎渲染並發送回瀏覽器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<br />

<p>全部的 code</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;ejs&#x27;</span>); <span class="comment">// register view engine</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/about&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.sendFile(<span class="string">&#x27;./views/about.html&#x27;</span>, &#123;<span class="attr">root</span>: __dirname&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/about-us&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.redirect(<span class="string">&#x27;/about&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.status(<span class="number">404</span>).sendFile(<span class="string">&#x27;./views/404.html&#x27;</span>, &#123;<span class="attr">root</span>: __dirname&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<br />

<p>一樣使用 nodemon 執行，在瀏覽器輸入 <code>localhost:3000</code>，會看到以下畫面<br><img src="https://i.imgur.com/bfXPpen.png"><br><br /></p>
<p>點擊 About 或 New Blog 連結會出現如下畫面，因為刪除了 html 檔所以找不到<br><img src="https://i.imgur.com/z9PEhPB.png"><br><br /></p>
<p>所以開始編輯 about.ejs，與 index.ejs 差不多，唯一不一樣的地方在顯示部落格內容的地方加了些假字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;blogs content&quot;&gt;</span><br><span class="line">        &lt;h2&gt;All Blogs&lt;&#x2F;h2&gt;</span><br><span class="line">        &lt;p&gt;Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, harum!&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, harum!&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, harum!&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>404.ejs 也只在部落格內容多了找不到頁面的提示，並將 div 的 classname 去除 blogs 改為 not-found</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;not-found content&quot;&gt;</span><br><span class="line">        Page not found!!</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>完成以上後將它們都渲染出來，這裡不需要 <code>&#39;/about-us&#39;</code> 所以去除了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;ejs&#x27;</span>); <span class="comment">// register view engine</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/about&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;about&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.status(<span class="number">404</span>).render(<span class="string">&#x27;404&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<br />

<p>執行，點擊 About 連結<br><img src="https://i.imgur.com/woLGDLW.png"><br><br /></p>
<p>點擊 New Blog 連結或是輸入其它的 URL，顯示 404 頁面<br><img src="https://i.imgur.com/whJuRM0.png"><br><br /></p>
<p>在 views 資料夾新增 create.ejs 視圖，與 index.ejs 不同於在部落格內容新增了表單，並將 classname 改為 create-blog，目前該表單並沒有作用，之後再添加功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;create-blog content&quot;&gt;</span><br><span class="line">        &lt;form&gt;</span><br><span class="line">            &lt;label for&#x3D;&quot;title&quot;&gt;Blog title:&lt;&#x2F;label&gt;</span><br><span class="line">            &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;title&quot; required&gt;</span><br><span class="line">            &lt;label for&#x3D;&quot;snippet&quot;&gt;Blog snippet:&lt;&#x2F;label&gt;</span><br><span class="line">            &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;snippet&quot; required&gt;</span><br><span class="line">            &lt;label for&#x3D;&quot;body&quot;&gt;Blog body:&lt;&#x2F;label&gt;</span><br><span class="line">            &lt;textarea id&#x3D;&quot;body&quot; required&gt;&lt;&#x2F;textarea&gt;</span><br><span class="line">            &lt;button&gt;Submit&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>app.js 添加 <code>&#39;/blogs/create&#39;</code> 的選項</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;ejs&#x27;</span>); <span class="comment">// register view engine</span></span><br><span class="line"><span class="comment">// app.set(&#x27;views&#x27;, &#x27;myviews&#x27;); // specify the views directory</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/about&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;about&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/blogs/create&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;create&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.status(<span class="number">404</span>).render(<span class="string">&#x27;404&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<br />

<p>執行，點擊 New Blog 連結<br><img src="https://i.imgur.com/RM4pJKL.png"><br><br /></p>
<p>做到這裡其實與前面做的差不多，但 EJS 及其它模板引擎真正強大的作用在於之後動態的注入數據及邏輯。<br><br /></p>
<h2 id="將數據傳遞到-views"><a href="#將數據傳遞到-views" class="headerlink" title="將數據傳遞到 views"></a>將數據傳遞到 views</h2><p>現在要開始將數據傳遞到 ejs 模板，使其不僅只有靜態內容，有些像是 PHP 的標籤，但不了解 PHP 也沒關係。</p>
<p>首先開啟 index.ejs，在 body 中編寫以下 code</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% const name &#x3D; &#39;Joe&#39; %&gt; &lt;!-- 定義常數 --&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;%</code> 開始，<code>%&gt;</code> 結束，而在裡面則可以編寫一些 code，例如我們可以宣告任何的 JavaScript 類型，就像這裡定義了字串常數 <code>name</code>，但這不會在前端瀏覽器運行，而是在後端伺服器運行，後面會再詳細說明這個過程，現在先理解 code。<br><br /></p>
<p>定義了常數，那麼要如何讓它輸出顯示出來呢? 如下便會在 p 元素中顯示 <code>name</code> 常數的值，當然不一定要包覆在元素中，但要顯示在網頁中總要放在元素裡讓 css 樣式渲染</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&lt;%&#x3D; name %&gt;&lt;&#x2F;p&gt; &lt;!-- 顯示常數 --&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>index.ejs 全部的 code</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;% const name &#x3D; &#39;Joe&#39; %&gt; &lt;!-- 定義常數 --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">            &lt;p&gt;&lt;%&#x3D; name %&gt;&lt;&#x2F;p&gt; &lt;!-- 顯示常數 --&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;blogs content&quot;&gt;</span><br><span class="line">        &lt;h2&gt;All Blogs&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>現在執行看看，連接 <code>localhost:3000</code><br><img src="https://i.imgur.com/WgU8quM.png"><br>可以看到最上面多了一個 p 元素，內容為我們在伺服器端的設定<br><br /></p>
<p>以上為一個簡單的示範，實際上並不會這麼做，因為我們更想的是傳遞應用程式中的數據，可能會與 database 進行溝通獲取數據，然後在將數據傳遞給視圖模板輸出，最後顯示在瀏覽器網頁上。</p>
<p>但現在先跳過數據庫的部分，現在僅先從我們負責處理程序的應用程式 app.js 傳遞數據給模板，這部分要用到 <code>res.render()</code> 的第二個參數，該參數是一個傳遞給視圖變數的物件，如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;Home&#x27;</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<br />

<p>然後在 index.ejs 就可以接收上面傳遞的 title 屬性，我們將它顯示在 head 裡的 title 元素，使用 <code>&lt;%= title %&gt;</code> 顯示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe | &lt;%&#x3D; title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br></pre></td></tr></table></figure>

<p>執行，在瀏覽器頂端的標題可以看到引用了我們在 app.js 設定的 <code>title</code><br><img src="https://i.imgur.com/wKRLMus.png"><br><br /></p>
<p>依此類推，將其它的頁面也做一樣的設定，但不同的值</p>
<p><strong>app.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;Home&#x27;</span>&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/about&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;about&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;About&#x27;</span>&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/blogs/create&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&#x27;create&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;Create a new Blog&#x27;</span>&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.status(<span class="number">404</span>).render(<span class="string">&#x27;404&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;404&#x27;</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>而每個 EJS 模板都與 index.ejs 作法一模一樣<br><br /></p>
<p>執行，切換各個頁面，顯示相對應的 <code>title</code><br><img src="https://i.imgur.com/jmOeaHd.png"><br><img src="https://i.imgur.com/t0iDsRL.png"><br><img src="https://i.imgur.com/C0kboNE.png"><br><br /></p>
<p>接著讓我們再輸出更多的內容並做邏輯判斷</p>
<p>在 <code>&#39;/&#39;</code> 的 callback function 中新增一個 <code>blogs</code> 陣列，裡面包含一些部落格標題及簡介是我們要輸出的內容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> blogs = [</span><br><span class="line">        &#123;<span class="attr">title</span>: <span class="string">&#x27;Nice to meet you&#x27;</span>, <span class="attr">snippet</span>: <span class="string">&#x27;Lorem ipsum dolor sit amet consectetur.&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">title</span>: <span class="string">&#x27;The weather is nice today&#x27;</span>, <span class="attr">snippet</span>: <span class="string">&#x27;Lorem ipsum dolor sit amet consectetur.&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">title</span>: <span class="string">&#x27;I am so happy&#x27;</span>, <span class="attr">snippet</span>: <span class="string">&#x27;Lorem ipsum dolor sit amet consectetur.&#x27;</span>&#125;</span><br><span class="line">    ];</span><br><span class="line">    </span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;Home&#x27;</span>, blogs&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>res.render()</code> 物件參數中添加 blogs 屬性及值(使用 ES6 的物件屬性值簡寫)，這樣就將 <code>blogs</code> 傳遞給視圖了。<br><br /></p>
<p>現在切換到 index.ejs 將 blogs 顯示出來，這裡我們要先檢查是否有 blogs，若有將內容顯示出來，若沒有則顯示沒有的資訊。</p>
<p>那麼如何確認 blogs 是否有值呢? 在 JavaScript 判斷一個陣列是否有值就檢查它的長度，這裡也這麼做。</p>
<p>我們可以先將 code 以 JS 的方式寫出來，如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (blogs.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    blogs.forEach(<span class="function"><span class="params">blog</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 輸出內容</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br />

<p>要寫在 ejs 裡，則每行都以 <code>&lt;% %&gt;</code> 包覆</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (blogs.length &gt; <span class="number">0</span>) &#123; %&gt;</span><br><span class="line">    &lt;% blogs.forEach(<span class="function"><span class="params">blog</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">        <span class="comment">// 輸出內容</span></span><br><span class="line">    &lt;% &#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>至於其中輸出內容的部分如下，可以參考官方文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (blogs.length &gt; <span class="number">0</span>) &#123; %&gt;</span><br><span class="line">    &lt;% blogs.forEach(<span class="function"><span class="params">blog</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">        &lt;h3&gt;&lt;%= blog.title %&gt;&lt;/h3&gt;</span><br><span class="line">        &lt;p&gt;&lt;%= blog.snippet %&gt;&lt;/p&gt;</span><br><span class="line">    &lt;% &#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>在加上 else 處理 blogs 沒有數據的情況</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (blogs.length &gt; <span class="number">0</span>) &#123; %&gt;</span><br><span class="line">    &lt;% blogs.forEach(<span class="function"><span class="params">blog</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">        &lt;h3&gt;&lt;%= blog.title %&gt;&lt;/h3&gt;</span><br><span class="line">        &lt;p&gt;&lt;%= blog.snippet %&gt;&lt;/p&gt;</span><br><span class="line">    &lt;% &#125;) %&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123; %&gt;</span><br><span class="line">    &lt;p&gt;There are no blogs to display...&lt;/p&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>index.ejs 全部的 code</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe | &lt;%&#x3D; title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;blogs content&quot;&gt;</span><br><span class="line">        &lt;h2&gt;All Blogs&lt;&#x2F;h2&gt;</span><br><span class="line">        &lt;% if (blogs.length &gt; 0) &#123; %&gt;</span><br><span class="line">            &lt;% blogs.forEach(blog &#x3D;&gt; &#123; %&gt;</span><br><span class="line">                &lt;h3&gt;&lt;%&#x3D; blog.title %&gt;&lt;&#x2F;h3&gt;</span><br><span class="line">                &lt;p&gt;&lt;%&#x3D; blog.snippet %&gt;&lt;&#x2F;p&gt;</span><br><span class="line">            &lt;% &#125;) %&gt;</span><br><span class="line">        &lt;% &#125; else &#123; %&gt;</span><br><span class="line">            &lt;p&gt;There are no blogs to display...&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>執行，可以看到在部落格內容的部分顯示 blogs 的數據<br><img src="https://i.imgur.com/qml4Kz4.png"><br><br /></p>
<p>如果將 blogs 的數據註解掉，變成一個空陣列</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> blogs = [</span><br><span class="line">        <span class="comment">// &#123;title: &#x27;Nice to meet you&#x27;, snippet: &#x27;Lorem ipsum dolor sit amet consectetur.&#x27;&#125;,</span></span><br><span class="line">        <span class="comment">// &#123;title: &#x27;The weather is nice today&#x27;, snippet: &#x27;Lorem ipsum dolor sit amet consectetur.&#x27;&#125;,</span></span><br><span class="line">        <span class="comment">// &#123;title: &#x27;I am so happy&#x27;, snippet: &#x27;Lorem ipsum dolor sit amet consectetur.&#x27;&#125;</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;Home&#x27;</span>, blogs&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>執行便會顯示沒有部落格可以顯示的訊息<br><img src="https://i.imgur.com/7hoZIJ7.png"><br><br /></p>
<p>接下來說一說 EJS 的模板從伺服器到顯示在瀏覽器這中間的過程。<br>EJS 模板透過 EJS view engine 處理其中動態注入的內容、變數、循環、條件…等等，產生出對應的 HTML 文件再發送給瀏覽器，這個過程稱為伺服器端的渲染。</p>
<p>以上即為將數據傳遞到 views 並輸出顯示在瀏覽器上的模板引擎。<br><br /></p>
<h2 id="部分模板"><a href="#部分模板" class="headerlink" title="部分模板"></a>部分模板</h2><p>前面使用到的 index、about、create、404 等模板都有些共同的部分，例如 head、nav 這些標籤是一模一樣，如果某天新增了頁面就要在 nav 新增連結，每個頁面的 nav 都要做修改，這樣當頁面越來越多時很是麻煩、且沒效率，所以我們可以製作部分的模板，並調用它們到每個頁面中，當需要修改時，只要修改該部分的模板就好。<br><br /></p>
<p>首先在 views 資料夾建立 partials 資料夾，並在其中新增 head.ejs、nav.ejs、footer.ejs 檔案作為部分模板<br><img src="https://i.imgur.com/wWHMuPi.png"></p>
<p>接著可以從前面的模板複製相同部分的 head、nav 到這些部分模板裡，如下</p>
<p><strong>head.ejs</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe | &lt;%&#x3D; title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br></pre></td></tr></table></figure>
<br />

<p><strong>nav.ejs</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;site-title&quot;&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;&#x2F;&quot;&gt;&lt;h1&gt;Blog Joe&lt;&#x2F;h1&gt;&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;p&gt;A Joe Site&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;&quot;&gt;Blogs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;blogs&#x2F;create&quot;&gt;New Blog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;nav&gt;</span><br></pre></td></tr></table></figure>
<br />

<p><strong>footer.ejs</strong> 可以自己編碼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;footer&gt;</span><br><span class="line">    Copyright &amp;copy; Blog Joe for learning </span><br><span class="line">&lt;&#x2F;footer&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>有了部分模板後，就要在頁面模板中調用、包含它們，語法如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- include(<span class="string">&#x27;./partials/nav.ejs&#x27;</span>) %&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>include()</code>，參數即部分模板的相對位置，注意這裡使用 <code>&lt;%-</code> 減號而不是 <code>&lt;%=</code> 等號，否則不能正常轉譯，會直接以字串的形式顯示在網頁中，如下<br><img src="https://i.imgur.com/QSBAQx4.png"></p>
<p>記得要將原來部分模板取代的部分先刪掉，否則會重複出現，以 index.ejs 舉例<br><strong>index.ejs</strong> 刪除 head 及 nav，並包含部分模板進去</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;%- include(<span class="string">&#x27;./partials/head.ejs&#x27;</span>) %&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- include(<span class="string">&#x27;./partials/nav.ejs&#x27;</span>) %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;blogs content&quot;</span>&gt;</span><br><span class="line">        &lt;h2&gt;All Blogs&lt;/h2&gt;</span><br><span class="line">        &lt;% <span class="keyword">if</span> (blogs.length &gt; <span class="number">0</span>) &#123; %&gt;</span><br><span class="line">            &lt;% blogs.forEach(<span class="function"><span class="params">blog</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">                &lt;h3&gt;&lt;%= blog.title %&gt;&lt;/h3&gt;</span><br><span class="line">                &lt;p&gt;&lt;%= blog.snippet %&gt;&lt;/p&gt;</span><br><span class="line">            &lt;% &#125;) %&gt;</span><br><span class="line">        &lt;% &#125; <span class="keyword">else</span> &#123; %&gt;</span><br><span class="line">            &lt;p&gt;There are no blogs to display...&lt;/p&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- include(<span class="string">&#x27;./partials/footer.ejs&#x27;</span>) %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>執行，可以看到 index 首頁仍跟之前一樣並新增了 footer<br><img src="https://i.imgur.com/rnyuh7C.png"></p>
<p>其它頁面模板也做一樣的處理，這樣之後要在這些相同的元件上做修改時，只要對該部分模板修改即可，所有包含的頁面都會一同更新。<br><br /></p>
<h2 id="加入-CSS"><a href="#加入-CSS" class="headerlink" title="加入 CSS"></a>加入 CSS</h2><p>添加 CSS 讓網頁看起來好看些，要做到這點不難，直接在 head.ejs 裡面編寫 style 即可，如下</p>
<p><strong>head.ejs</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Blog Joe | &lt;%&#x3D; title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        @import url(&#39;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;css2?family&#x3D;Noto+Serif&amp;display&#x3D;swap&#39;);</span><br><span class="line">        body&#123;</span><br><span class="line">          max-width: 1200px;</span><br><span class="line">          margin: 20px auto;</span><br><span class="line">          padding: 0 20px;</span><br><span class="line">          font-family: &#39;Noto Serif&#39;, serif;</span><br><span class="line">          max-width: 1200px;</span><br><span class="line">        &#125;</span><br><span class="line">        p, h1, h2, h3, a, ul&#123;</span><br><span class="line">          margin: 0;</span><br><span class="line">          padding: 0;</span><br><span class="line">          text-decoration: none;</span><br><span class="line">          color: #222;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;* nav &amp; footer styles *&#x2F;</span><br><span class="line">        nav&#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          justify-content: space-between;</span><br><span class="line">          margin-bottom: 60px;</span><br><span class="line">          padding-bottom: 10px;</span><br><span class="line">          border-bottom: 1px solid #ddd;</span><br><span class="line">          text-transform: uppercase;</span><br><span class="line">        &#125;</span><br><span class="line">        nav ul&#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          justify-content: space-between;</span><br><span class="line">          align-items: flex-end;</span><br><span class="line">        &#125;</span><br><span class="line">        nav li&#123;</span><br><span class="line">          list-style-type: none;</span><br><span class="line">          margin-left: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        nav h1&#123;</span><br><span class="line">          font-size: 3em;</span><br><span class="line">        &#125;</span><br><span class="line">        nav p, nav a&#123;</span><br><span class="line">          color: #777;</span><br><span class="line">          font-weight: 300;</span><br><span class="line">        &#125;</span><br><span class="line">        footer&#123;</span><br><span class="line">          color: #777;</span><br><span class="line">          text-align: center;</span><br><span class="line">          margin: 80px auto 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        h2&#123;</span><br><span class="line">          margin-bottom: 40px;</span><br><span class="line">        &#125;</span><br><span class="line">        h3&#123;</span><br><span class="line">          text-transform: capitalize;</span><br><span class="line">          margin-bottom: 8px;</span><br><span class="line">        &#125;</span><br><span class="line">        .content&#123;</span><br><span class="line">          margin-left: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;* index styles *&#x2F;</span><br><span class="line">        &#x2F;* details styles *&#x2F;</span><br><span class="line">        &#x2F;* create styles *&#x2F;</span><br><span class="line">        .create-blog form&#123;</span><br><span class="line">          max-width: 400px;</span><br><span class="line">          margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .create-blog input,</span><br><span class="line">        .create-blog textarea&#123;</span><br><span class="line">          display: block;</span><br><span class="line">          width: 100%;</span><br><span class="line">          margin: 10px 0;</span><br><span class="line">          padding: 8px;</span><br><span class="line">        &#125;</span><br><span class="line">        .create-blog label&#123;</span><br><span class="line">          display: block;</span><br><span class="line">          margin-top: 24px;</span><br><span class="line">        &#125;</span><br><span class="line">        textarea&#123;</span><br><span class="line">          height: 120px;</span><br><span class="line">        &#125;</span><br><span class="line">        .create-blog button&#123;</span><br><span class="line">          margin-top: 20px;</span><br><span class="line">          background: crimson;</span><br><span class="line">          color: white;</span><br><span class="line">          padding: 6px;</span><br><span class="line">          border: 0;</span><br><span class="line">          font-size: 1.2em;</span><br><span class="line">          cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br></pre></td></tr></table></figure>
<br />

<p>執行，現在網頁變得好看些了<br><img src="https://i.imgur.com/MempvHI.png"><br><br /></p>
<p>但我們會希望 CSS 還是能夠放在單獨的文件使用，這部分在之後的文章才會學習，以上即為使用 view engine 渲染網頁，並動態地注入數據。</p>
<hr>
<p><strong>參考資料</strong><br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=yXEesONd_54">The Net Ninja | Node.js Crash Course Tutorial #7 - View Engines</a></p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Node-js/">Node.js</a></div><div class="post_share"><div class="social-share" data-image="https://i.imgur.com/4OIbWlf.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/01/18/JS-Scope-Scope-chain/"><img class="prev-cover" src="https://i.imgur.com/fyD4pxY.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">[JS] Scope &amp; Scope chain</div></div></a></div><div class="next-post pull-right"><a href="/2021/01/17/Node-js-Express/"><img class="next-cover" src="https://i.imgur.com/4OIbWlf.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">[Node.js] Express</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相關推薦</span></div><div class="relatedPosts-list"><div><a href="/2020/12/26/Node-js-介紹與開始/" title="[Node.js] 介紹與開始"><img class="cover" src="https://i.imgur.com/4OIbWlf.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-26</div><div class="title">[Node.js] 介紹與開始</div></div></a></div><div><a href="/2020/12/26/Node-js-基礎與檔案系統/" title="[Node.js] 基礎與檔案系統"><img class="cover" src="https://i.imgur.com/4OIbWlf.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-26</div><div class="title">[Node.js] 基礎與檔案系統</div></div></a></div><div><a href="/2020/12/28/Node-js-客戶端與伺服器端/" title="[Node.js] 客戶端與伺服器端"><img class="cover" src="https://i.imgur.com/4OIbWlf.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-28</div><div class="title">[Node.js] 客戶端與伺服器端</div></div></a></div><div><a href="/2020/12/30/Node-js-NPM-套件管理工具/" title="[Node.js] NPM 套件管理工具"><img class="cover" src="https://i.imgur.com/4OIbWlf.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-30</div><div class="title">[Node.js] NPM 套件管理工具</div></div></a></div><div><a href="/2021/01/17/Node-js-Express/" title="[Node.js] Express"><img class="cover" src="https://i.imgur.com/4OIbWlf.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-17</div><div class="title">[Node.js] Express</div></div></a></div><div><a href="/2020/12/30/Node-js-請求與響應/" title="[Node.js] 請求與響應"><img class="cover" src="https://i.imgur.com/4OIbWlf.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-30</div><div class="title">[Node.js] 請求與響應</div></div></a></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">JoeB</div><div class="author-info__description">學習各種東西的記錄或是分享有趣的事物</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">6</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分類</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Node-js-%E4%B8%83-View-Engines"><span class="toc-text">Node.js(七) View Engines</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#View-Engines"><span class="toc-text">View Engines</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EJS"><span class="toc-text">EJS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%87%E6%95%B8%E6%93%9A%E5%82%B3%E9%81%9E%E5%88%B0-views"><span class="toc-text">將數據傳遞到 views</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E6%A8%A1%E6%9D%BF"><span class="toc-text">部分模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5-CSS"><span class="toc-text">加入 CSS</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/02/07/Node-js-MongoDB/" title="[Node.js] MongoDB"><img src="https://i.imgur.com/4OIbWlf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Node.js] MongoDB"/></a><div class="content"><a class="title" href="/2021/02/07/Node-js-MongoDB/" title="[Node.js] MongoDB">[Node.js] MongoDB</a><time datetime="2021-02-07T06:15:37.000Z" title="發表於 2021-02-07 14:15:37">2021-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/06/Node-js-Middleware-%E4%B8%AD%E4%BB%8B%E8%BB%9F%E9%AB%94/" title="[Node.js] Middleware 中介軟體"><img src="https://i.imgur.com/4OIbWlf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Node.js] Middleware 中介軟體"/></a><div class="content"><a class="title" href="/2021/02/06/Node-js-Middleware-%E4%B8%AD%E4%BB%8B%E8%BB%9F%E9%AB%94/" title="[Node.js] Middleware 中介軟體">[Node.js] Middleware 中介軟體</a><time datetime="2021-02-06T05:08:30.000Z" title="發表於 2021-02-06 13:08:30">2021-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1/" title="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?"><img src="https://i.imgur.com/fyD4pxY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?"/></a><div class="content"><a class="title" href="/2021/01/25/JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1/" title="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?">[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?</a><time datetime="2021-01-25T07:17:12.000Z" title="發表於 2021-01-25 15:17:12">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/18/JS-Closure-%E9%96%89%E5%8C%85/" title="[JS] Closure 閉包"><img src="https://i.imgur.com/fyD4pxY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[JS] Closure 閉包"/></a><div class="content"><a class="title" href="/2021/01/18/JS-Closure-%E9%96%89%E5%8C%85/" title="[JS] Closure 閉包">[JS] Closure 閉包</a><time datetime="2021-01-18T07:40:38.000Z" title="發表於 2021-01-18 15:40:38">2021-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/18/JS-Scope-Scope-chain/" title="[JS] Scope &amp; Scope chain"><img src="https://i.imgur.com/fyD4pxY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[JS] Scope &amp; Scope chain"/></a><div class="content"><a class="title" href="/2021/01/18/JS-Scope-Scope-chain/" title="[JS] Scope &amp; Scope chain">[JS] Scope &amp; Scope chain</a><time datetime="2021-01-18T06:32:19.000Z" title="發表於 2021-01-18 14:32:19">2021-01-18</time></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://i.imgur.com/4OIbWlf.png)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By JoeB</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>