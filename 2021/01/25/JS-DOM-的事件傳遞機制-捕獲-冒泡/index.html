<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>[JS] DOM 的事件傳遞機制? 捕獲? 冒泡? | Joe's Blog</title><meta name="keywords" content="JavaScript"><meta name="author" content="JoeB"><meta name="copyright" content="JoeB"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?在閱讀本文章前，須先了解 DOM 基本的 addEventListener() 事件添加用法，本文主要記錄 DOM 的事件傳遞機制，以及釐清 stopPropagation() 與 preventDefault() 的使用。 Event Flow 事件流程關於事件傳遞最常見的情況便是網頁元素中，父元素包含子元素，兩者皆添加事件，當點擊子元素時也相當">
<meta property="og:type" content="article">
<meta property="og:title" content="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?">
<meta property="og:url" content="http://example.com/2021/01/25/JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1/index.html">
<meta property="og:site_name" content="Joe&#39;s Blog">
<meta property="og:description" content="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?在閱讀本文章前，須先了解 DOM 基本的 addEventListener() 事件添加用法，本文主要記錄 DOM 的事件傳遞機制，以及釐清 stopPropagation() 與 preventDefault() 的使用。 Event Flow 事件流程關於事件傳遞最常見的情況便是網頁元素中，父元素包含子元素，兩者皆添加事件，當點擊子元素時也相當">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/fyD4pxY.png">
<meta property="article:published_time" content="2021-01-25T07:17:12.000Z">
<meta property="article:modified_time" content="2021-03-07T07:20:22.766Z">
<meta property="article:author" content="JoeB">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/fyD4pxY.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/01/25/JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-07 15:20:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分類</div><div class="length-num">1</div></a></div></div></div><hr/></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.imgur.com/fyD4pxY.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Joe's Blog</a></span><span id="menus"><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2021-01-25T07:17:12.000Z" title="發表於 2021-01-25 15:17:12">2021-01-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2021-03-07T07:20:22.766Z" title="更新於 2021-03-07 15:20:22">2021-03-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%B6%B2%E9%A0%81-%E7%B6%B2%E8%B7%AF%E7%9B%B8%E9%97%9C/">網頁/網路相關</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JS-DOM-的事件傳遞機制-捕獲-冒泡"><a href="#JS-DOM-的事件傳遞機制-捕獲-冒泡" class="headerlink" title="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?"></a>[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?</h1><p>在閱讀本文章前，須先了解 DOM 基本的 <code>addEventListener()</code> 事件添加用法，本文主要記錄 DOM 的事件傳遞機制，以及釐清 <code>stopPropagation()</code> 與 <code>preventDefault()</code> 的使用。<br><br /></p>
<h2 id="Event-Flow-事件流程"><a href="#Event-Flow-事件流程" class="headerlink" title="Event Flow 事件流程"></a>Event Flow 事件流程</h2><p>關於事件傳遞最常見的情況便是網頁元素中，父元素包含子元素，兩者皆添加事件，當點擊子元素時也相當於點擊了父元素，所以兩個元素的點擊事件都會觸發，那麼哪一個會先執行呢? 這點在瞭解後面的事件流程後相信就會明白了。<br><br /></p>
<p>事件流程可以分為三種階段</p>
<ol>
<li>capture phase 捕獲階段</li>
<li>target phase 目標階段</li>
<li>bubbling phase 冒泡階段<br />

</li>
</ol>
<p>這裡以點擊 (click) 事件為例，但事件流程並不限於點擊事件而已</p>
<h3 id="Capture-Phase-捕獲階段"><a href="#Capture-Phase-捕獲階段" class="headerlink" title="Capture Phase 捕獲階段"></a>Capture Phase 捕獲階段</h3><p><img src="https://i.imgur.com/386ujpP.png"><br>圖片來源：<a target="_blank" rel="noopener" href="http://www.java2s.com/Book/JavaScript/DOM/Event_Flow_capture_target_and_bubbling.htm">Event Flow: capture, target, and bubbling</a></p>
<p>當點擊網頁某一元素時，會先進行事件捕獲的階段，從最外圍的根節點往下傳遞到點擊的元素，中間經過的父元素都會觸發點擊事件，並依序從最外圍的元素到目標元素。<br><br /></p>
<h3 id="Target-Phase-目標階段"><a href="#Target-Phase-目標階段" class="headerlink" title="Target Phase 目標階段"></a>Target Phase 目標階段</h3><p>該階段自然是在 <strong>點擊的元素</strong> 觸發事件的階段，這階段不會區分事件是捕獲還是冒泡，這點在後面會再說明。<br><br /></p>
<h3 id="Bubbling-Phase-冒泡階段"><a href="#Bubbling-Phase-冒泡階段" class="headerlink" title="Bubbling Phase 冒泡階段"></a>Bubbling Phase 冒泡階段</h3><p><img src="https://i.imgur.com/hlKpv38.png"><br>圖片來源：<a target="_blank" rel="noopener" href="http://www.java2s.com/Book/JavaScript/DOM/Event_Flow_capture_target_and_bubbling.htm">Event Flow: capture, target, and bubbling</a></p>
<p>與 Capture Phase 相反，從點擊的元素先觸發事件，再往外圍包覆的父元素依序執行。<br><br /></p>
<p>以上三種階段都是觸發某一事件時的流程，可以看下圖明白整體過程<br><img src="https://i.imgur.com/ksAANuZ.png"><br>圖片來源：<a target="_blank" rel="noopener" href="https://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-phases">W3C, DOM event flow</a></p>
<p><code>&lt;td&gt;</code> 為使用者觸發事件的元素，先執行 capture phase 的事件，再來是到目標元素的 target phase，最後則執行 bubbling phase 的事件。<br><br /></p>
<p>明白以上事件流程的原理後，再來說一說 <code>addEventListener()</code> 與之相關的參數：</p>
<ul>
<li>第一個參數為觸發的事件如: click、mousemove …</li>
<li>第二個參數為 event handler 事件處理器就是要執行的 function</li>
<li>第三個參數則是 true/false 設定事件是在捕獲/冒泡階段</li>
</ul>
<p>從第三點可以知道一個元素是可以同時擁有兩個階端的不同事件，會在相對應的時機觸發執行，下面就用實際範例瞭解</p>
<p>HTML 設置三層的父子關係元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;grandpa&quot;&gt;</span><br><span class="line">    我是爺爺</span><br><span class="line">    &lt;div id&#x3D;&quot;father&quot;&gt;</span><br><span class="line">        我是爸爸</span><br><span class="line">        &lt;div id&#x3D;&quot;son&quot;&gt;</span><br><span class="line">            我是兒子</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>js 添加以下事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> grandpa = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;grandpa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> father = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;father&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> son = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;son&#x27;</span>);</span><br><span class="line"></span><br><span class="line">grandpa.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爺爺，capture phase&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">grandpa.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爺爺，bubbling phase&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，capture phase&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，bubbling phase&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，capture phase&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，bubbling phase&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<br />

<p>點擊「我是兒子」元素，顯示以下結果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，capture phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是兒子，capture phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是兒子，bubbling phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，bubbling phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是爺爺，bubbling phase&quot;</span></span><br></pre></td></tr></table></figure>
<p>由最外圍包覆的元素往最裡面的目標元素觸發 capture 階段的事件，之後再以相反的順序執行 bubbling 階段事件。<br><br /></p>
<p>點擊「我是爸爸」元素，事件傳遞只會到爸爸這裡就不會再往下面傳遞到兒子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，capture phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，bubbling phase&quot;</span></span><br><span class="line"><span class="string">&quot;我是爺爺，bubbling phase&quot;</span></span><br></pre></td></tr></table></figure>
<br />

<h2 id="Target-Phase"><a href="#Target-Phase" class="headerlink" title="Target Phase"></a>Target Phase</h2><p>瞭解以上範例後，還有一些問題要釐清，像是範例中沒有提到 <strong>target phase</strong>，事實上在範例中點擊「我是兒子」元素則「我是兒子」即為該次事件流程的目標階段，若點擊「我是爸爸」元素則「我是爸爸」為目標階段。這一點我們可以透過 <strong>event handler</strong> 的事件參數，有一個 <code>eventPhase</code> 的屬性可以用來表示事件是在哪一個 Phase 觸發的。</p>
<p>將範例中的 js 修改如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> grandpa = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;grandpa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> father = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;father&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> son = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;son&#x27;</span>);</span><br><span class="line"></span><br><span class="line">grandpa.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爺爺，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">grandpa.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爺爺，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<br />

<p>點擊「我是兒子」元素，顯示以下結果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase，phase:1&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，capture phase，phase:1&quot;</span></span><br><span class="line"><span class="string">&quot;我是兒子，capture phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是兒子，bubbling phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，bubbling phase，phase:3&quot;</span></span><br><span class="line"><span class="string">&quot;我是爺爺，bubbling phase，phase:3&quot;</span></span><br></pre></td></tr></table></figure>
<p>1 是 capture phase，2 是 target phase，3 是 bubbling phase<br><br /></p>
<p>點擊「我是爸爸」元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase，phase:1&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，capture phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，bubbling phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是爺爺，bubbling phase，phase:3&quot;</span></span><br></pre></td></tr></table></figure>
<br />

<p>點擊「我是爺爺」元素，只有一個元素也就是目標元素，所以為 target phase</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是爺爺，bubbling phase，phase:2&quot;</span></span><br></pre></td></tr></table></figure>

<p>這邊要再注意的是前面有說過 <strong>target phase</strong> 是不區分捕獲或是冒泡事件的，執行順序是依 <code>addEventListener()</code> 事件添加的順序，例如把「我是兒子」元素的事件添加順序相反，先添加冒泡再添加捕獲</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p>這時再點擊「我是兒子」</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase，phase:1&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，capture phase，phase:1&quot;</span></span><br><span class="line"><span class="string">&quot;我是兒子，bubbling phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是兒子，capture phase，phase:2&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，bubbling phase，phase:3&quot;</span></span><br><span class="line"><span class="string">&quot;我是爺爺，bubbling phase，phase:3&quot;</span></span><br></pre></td></tr></table></figure>
<p>可以看到在 phase 為 2 也就是 target phase，會執行先添加的冒泡事件再執行捕獲事件。</p>
<p>總結一下可以記住先捕獲再冒泡，但在目標階段不區分的原則。<br><br /></p>
<p>補充： <code>addEventListener()</code> 第三個參數的預設值為 false 也就是 bubbling，所以如果要添加冒泡事件可以省略第三個參數。<br><br /></p>
<h2 id="阻止事件傳遞-e-stopPropagation"><a href="#阻止事件傳遞-e-stopPropagation" class="headerlink" title="阻止事件傳遞 e.stopPropagation()"></a>阻止事件傳遞 <code>e.stopPropagation()</code></h2><p>我們可以透過 <code>e.stopPropagation()</code> 的使用，在事件流程的某一節點中阻止後面的事件繼續傳遞，例如前面的範例中，在「我是爸爸」元素的捕獲事件中阻止事件傳遞。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> grandpa = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;grandpa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> father = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;father&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> son = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;son&#x27;</span>);</span><br><span class="line"></span><br><span class="line">grandpa.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爺爺，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">grandpa.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爺爺，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加 stopPropagation() 阻止事件傳遞</span></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.stopPropagation();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是兒子，bubbling phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<br />

<p>點擊「我是兒子」，可以看到在爸爸的捕獲階段就阻止了後續事件的傳遞</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;我是爺爺，capture phase，phase:1&quot;</span></span><br><span class="line"><span class="string">&quot;我是爸爸，capture phase，phase:1&quot;</span></span><br></pre></td></tr></table></figure>
<br />

<p>阻止事件的傳遞不限於捕獲階段，冒泡階段也可以使用，不過要注意的是如果在同一元素同一階段添加多個事件，則即使其中一個事件執行阻止事件傳遞的指令，另一個事件仍會執行，如下都設定捕獲事件，都會執行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.stopPropagation();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是爸爸2，capture phase，&#x27;</span> + <span class="string">&#x27;phase:&#x27;</span> + e.eventPhase)</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<br />

<h2 id="取消預設行為-e-preventDefault"><a href="#取消預設行為-e-preventDefault" class="headerlink" title="取消預設行為 e.preventDefault()"></a>取消預設行為 <code>e.preventDefault()</code></h2><p>HTML 某些元素會有瀏覽器預設的行為，最常見的為 <code>&lt;a&gt;</code>，點擊時會前往或是在新分頁開啟連結，有時候我們並不希望這麼做，所以 <code>e.preventDefault()</code> 的作用就是取消該預設行為。</p>
<p><strong>範例如下</strong></p>
<p>有一個欲連結到 Google 的連結</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id&#x3D;&quot;link&quot; href&#x3D;&quot;https:&#x2F;&#x2F;www.google.com&quot;&gt;Google&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<p>使用 <code>e.preventDefault()</code> 阻止瀏覽器預設跳轉頁面的行為發生</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> link = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;link&#x27;</span>);</span><br><span class="line"></span><br><span class="line">link.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">   e.preventDefault();</span><br><span class="line">   alert(<span class="string">&#x27;我是 Google 連結!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>這樣點擊 Google 連結時就不會跳轉頁面，並彈出 <code>&#39;我是 Google 連結!&#39;</code> 的警告視窗。</p>
<p>順帶一提的是 <code>e.preventDefault()</code> 與 DOM 事件的傳遞毫無關係，即使阻止了瀏覽器的預設行為也不會阻止事件流程的傳遞。<br><br /></p>
<h2 id="事件代理-Event-Delegation"><a href="#事件代理-Event-Delegation" class="headerlink" title="事件代理 Event Delegation"></a>事件代理 Event Delegation</h2><p>在有多個元素要執行同一事件，可以直接想到的作法是對每個元素一個一個的添加事件，但如果數量有數千個呢? 這麼做實在是很每效率、程式碼又多，所以有了 event delegation 事件代理的機制。</p>
<p>事件代理的原理就是透過事件傳遞的特性，對多個元素的同一父元素或更高層的元素做事件添加就好，這樣即使點擊子元素也會觸發事件，範例如下</p>
<p>建立一個無序清單，希望點擊每個 <code>&lt;li&gt;</code> 元素可以在控制台印出該元素內的內容<br><strong>HTML</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id&#x3D;&quot;list&quot;&gt;</span><br><span class="line">    &lt;li&gt;item1&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li&gt;item2&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li&gt;item3&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li&gt;item4&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li&gt;item5&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br></pre></td></tr></table></figure>

<p><strong>JavaScript</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;list&#x27;</span>);</span><br><span class="line"></span><br><span class="line">list.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.target.tagName.toLowerCase() === <span class="string">&#x27;li&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.target.textContent);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>對所有 <code>&lt;li&gt;</code> 元素的共同父元素 <code>#list</code> 進行事件添加，當點擊 <code>&lt;li&gt;</code> 時便會觸發事件，並且透過事件參數 <code>e.target</code> 表示的是點擊的元素(<code>e.currentTarget</code> 則是執行事件的元素也就是 <code>#list</code>)，並對 <code>tagName.toLowerCase()</code> 比較是否為 <code>&#39;li&#39;</code> ，若判斷是則執行印出 <code>e.target.textContent</code> 也就是點擊元素內的內容。</p>
<p>這裡要注意的是若點擊 <code>#list</code> 元素而不是 <code>li</code> 元素，雖然也會觸發事件，但由於元素標籤不是 <code>li</code> 所以不會執行任何事情。<br><br /></p>
<p>除了上面的做法也可以修改如下<br><strong>HTML</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id&#x3D;&quot;list&quot;&gt;</span><br><span class="line">    &lt;li data-num&#x3D;&quot;1&quot;&gt;item1&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li data-num&#x3D;&quot;2&quot;&gt;item2&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li data-num&#x3D;&quot;3&quot;&gt;item3&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li data-num&#x3D;&quot;4&quot;&gt;item4&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li data-num&#x3D;&quot;5&quot;&gt;item5&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br></pre></td></tr></table></figure>
<p><strong>JavaScript</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;list&#x27;</span>);</span><br><span class="line"></span><br><span class="line">list.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.target.getAttribute(<span class="string">&#x27;data-num&#x27;</span>)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e.target.textContent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>這裡透過元素是否含有 <code>data-num</code> 屬性來做識別，還有很多的作法只要能夠判斷、分別即可。<br><br /></p>
<hr>
<p><strong>參考資料</strong></p>
<ol>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10191970">重新認識 JavaScript: Day 14 事件機制的原理</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10192015">重新認識 JavaScript: Day 15 隱藏在 “事件” 之中的秘密</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.techbridge.cc/2017/07/15/javascript-event-propagation/">DOM 的事件傳遞機制：捕獲與冒泡</a></li>
<li><a target="_blank" rel="noopener" href="https://shubo.io/event-bubbling-event-capturing-event-delegation/">[教學] 瀏覽器事件：Event Bubbling, Event Capturing 及 Event Delegation</a></li>
</ol>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post_share"><div class="social-share" data-image="https://i.imgur.com/fyD4pxY.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2021/01/18/JS-Closure-%E9%96%89%E5%8C%85/"><img class="next-cover" src="https://i.imgur.com/fyD4pxY.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">[JS] Closure 閉包</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相關推薦</span></div><div class="relatedPosts-list"><div><a href="/2021/01/18/JS-Closure-閉包/" title="[JS] Closure 閉包"><img class="cover" src="https://i.imgur.com/fyD4pxY.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-18</div><div class="title">[JS] Closure 閉包</div></div></a></div><div><a href="/2021/01/18/JS-Scope-Scope-chain/" title="[JS] Scope & Scope chain"><img class="cover" src="https://i.imgur.com/fyD4pxY.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-18</div><div class="title">[JS] Scope & Scope chain</div></div></a></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">JoeB</div><div class="author-info__description">學習各種東西的記錄或是分享有趣的事物</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">6</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分類</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1"><span class="toc-text">[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Event-Flow-%E4%BA%8B%E4%BB%B6%E6%B5%81%E7%A8%8B"><span class="toc-text">Event Flow 事件流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Capture-Phase-%E6%8D%95%E7%8D%B2%E9%9A%8E%E6%AE%B5"><span class="toc-text">Capture Phase 捕獲階段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Target-Phase-%E7%9B%AE%E6%A8%99%E9%9A%8E%E6%AE%B5"><span class="toc-text">Target Phase 目標階段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bubbling-Phase-%E5%86%92%E6%B3%A1%E9%9A%8E%E6%AE%B5"><span class="toc-text">Bubbling Phase 冒泡階段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Target-Phase"><span class="toc-text">Target Phase</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E-e-stopPropagation"><span class="toc-text">阻止事件傳遞 e.stopPropagation()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E9%A0%90%E8%A8%AD%E8%A1%8C%E7%82%BA-e-preventDefault"><span class="toc-text">取消預設行為 e.preventDefault()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BB%A3%E7%90%86-Event-Delegation"><span class="toc-text">事件代理 Event Delegation</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1/" title="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?"><img src="https://i.imgur.com/fyD4pxY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?"/></a><div class="content"><a class="title" href="/2021/01/25/JS-DOM-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E%E6%A9%9F%E5%88%B6-%E6%8D%95%E7%8D%B2-%E5%86%92%E6%B3%A1/" title="[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?">[JS] DOM 的事件傳遞機制? 捕獲? 冒泡?</a><time datetime="2021-01-25T07:17:12.000Z" title="發表於 2021-01-25 15:17:12">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/18/JS-Closure-%E9%96%89%E5%8C%85/" title="[JS] Closure 閉包"><img src="https://i.imgur.com/fyD4pxY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[JS] Closure 閉包"/></a><div class="content"><a class="title" href="/2021/01/18/JS-Closure-%E9%96%89%E5%8C%85/" title="[JS] Closure 閉包">[JS] Closure 閉包</a><time datetime="2021-01-18T07:40:38.000Z" title="發表於 2021-01-18 15:40:38">2021-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/18/JS-Scope-Scope-chain/" title="[JS] Scope &amp; Scope chain"><img src="https://i.imgur.com/fyD4pxY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[JS] Scope &amp; Scope chain"/></a><div class="content"><a class="title" href="/2021/01/18/JS-Scope-Scope-chain/" title="[JS] Scope &amp; Scope chain">[JS] Scope &amp; Scope chain</a><time datetime="2021-01-18T06:32:19.000Z" title="發表於 2021-01-18 14:32:19">2021-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/17/Node-js-View-Engines/" title="[Node.js] View Engines"><img src="https://i.imgur.com/4OIbWlf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Node.js] View Engines"/></a><div class="content"><a class="title" href="/2021/01/17/Node-js-View-Engines/" title="[Node.js] View Engines">[Node.js] View Engines</a><time datetime="2021-01-17T07:01:45.000Z" title="發表於 2021-01-17 15:01:45">2021-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/17/Node-js-Express/" title="[Node.js] Express"><img src="https://i.imgur.com/4OIbWlf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Node.js] Express"/></a><div class="content"><a class="title" href="/2021/01/17/Node-js-Express/" title="[Node.js] Express">[Node.js] Express</a><time datetime="2021-01-17T06:07:50.000Z" title="發表於 2021-01-17 14:07:50">2021-01-17</time></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://i.imgur.com/fyD4pxY.png)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By JoeB</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>